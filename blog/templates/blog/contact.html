{% extends "blog/layout.html" %}
{% load static %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init('q20xEuozujRx0aE0q'); // Replace 'YOUR_PUBLIC_KEY' with your actual EmailJS public key
  })();
</script>
{% endblock %}

{% block body %}

<form id="contact-form" class="w-1/2 mx-auto bg-stone-900 shadow-md rounded px-8 pt-6 pb-8 mb-8 mt-28">
    <h1 class="text-2xl font-bold text-center mb-6 text-stone-100">Contact Me</h1>

    <div class="mb-4">
        <label for="name" class="block text-stone-300 text-sm font-bold mb-2">Name:</label>
        <input 
            type="text" 
            id="name" 
            name="name" 
            placeholder="Your Name" 
            required 
            class="shadow appearance-none border border-stone-700 rounded w-full py-2 px-3 bg-stone-900 text-stone-100 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
    </div>

    <div class="mb-4">
        <label for="email" class="block text-stone-300 text-sm font-bold mb-2">Email:</label>
        <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="Your Email" 
            required 
            class="shadow appearance-none border border-stone-700 rounded w-full py-2 px-3 bg-stone-900 text-stone-100 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
    </div>

    <div class="mb-6">
        <label for="message" class="block text-stone-300 text-sm font-bold mb-2">Message:</label>
        <textarea 
            id="message" 
            name="message" 
            placeholder="Your Message" 
            required 
            class="shadow appearance-none border border-stone-700 rounded w-full py-2 px-3 bg-stone-900 text-stone-100 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 h-32 resize-none"
        ></textarea>
    </div>

    <div class="flex items-center justify-center">
        <button 
            type="submit" 
            class="bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
            Send Message
        </button>
    </div>
</form>

<script>
    document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission
  
      // Collect form data
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const message = document.getElementById('message').value;
  
      // Define EmailJS parameters
      const templateParams = {
        name: name,
        email: email,
        message: message,
      };
  
      // Send the email
      emailjs.send('service_uechydr', 'template_v3chagr', templateParams)
        .then(function(response) {
          alert('Message sent successfully!'); // Success message
          document.getElementById('contact-form').reset(); // Clear the form
        }, function(error) {
          alert('Failed to send message. Please try again later.'); // Error message
          console.error('Error:', error);
        });
    });
  </script>

{% endblock %}
